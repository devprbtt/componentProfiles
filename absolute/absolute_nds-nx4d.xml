<?xml version="1.0" encoding="UTF-8"?>
<component xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="racepoint_component_profile.xsd" manufacturer="Absolute" model="NDS-NX4d" alias="Absolute Nexos 6x4 Multiroom Control Amplifier, NDS-NX4" device_class="AV_processor" minimum_component_engine_version="0" rpm_xml_version="$Revision: 2.0 $">
    <notes>
        For more information about this product, please visit 'http://www.absoluteacoustics.com/nx4.html'.
    </notes>
    <control_interfaces preferred="rs232">
        <rs232 name_on_component="RS232 INTERFACE" data_length="8" parity_bit="no" stop_bit="1" flow_control="none" preferred_baud_rate="38400" checksum_type="standard" checksum_offset_B="0" response_time_length_ms="0" connector_type="db9 female" cable_type="rs232 straight">
            <baud_rate speed="38400"/>          
            <receive_start_condition type="hex">0200</receive_start_condition>
        </rs232>
    </control_interfaces>

    <media_interfaces>
        <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 1">
            <audio_media type="rca_stereo"/>
            <resource resource_type="AV_AUDIOSWITCH_FUNCTION"/>
        </input>
        <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 2">
            <audio_media type="rca_stereo"/>
            <resource resource_type="AV_AUDIOSWITCH_FUNCTION"/>
        </input>
        <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 3">
            <audio_media type="rca_stereo"/>
            <resource resource_type="AV_AUDIOSWITCH_FUNCTION"/>
        </input>
        <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 4">
            <audio_media type="rca_stereo"/>
            <resource resource_type="AV_AUDIOSWITCH_FUNCTION"/>
        </input>
        <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 5">
            <audio_media type="rca_stereo"/>
            <resource resource_type="AV_AUDIOSWITCH_FUNCTION"/>
        </input>
        <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 6">
            <audio_media type="optical_digital"/>
            <resource resource_type="AV_AUDIOSWITCH_FUNCTION"/>
        </input>
        <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 1">
            <audio_media type="rca_stereo"/>
            <resource resource_type="AV_STEREOPROCESSOR_FUNCTION"/>
            <resource resource_type="AV_VOLUMECONTROL_FUNCTION"/>
        </output>
        <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 2">
            <audio_media type="rca_stereo"/>
            <resource resource_type="AV_STEREOPROCESSOR_FUNCTION"/>
            <resource resource_type="AV_VOLUMECONTROL_FUNCTION"/>
        </output>
        <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 3">
            <audio_media type="rca_stereo"/>
            <resource resource_type="AV_STEREOPROCESSOR_FUNCTION"/>
            <resource resource_type="AV_VOLUMECONTROL_FUNCTION"/>
        </output>
        <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 4">
            <audio_media type="rca_stereo"/>
            <resource resource_type="AV_STEREOPROCESSOR_FUNCTION"/>
            <resource resource_type="AV_VOLUMECONTROL_FUNCTION"/>
        </output>        
        <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 1">
            <audio_media type="speakers_stereo"/>
            <resource resource_type="AV_AMPLIFIER_FUNCTION"/>
            <resource resource_type="AV_STEREOPROCESSOR_FUNCTION"/>
            <resource resource_type="AV_VOLUMECONTROL_FUNCTION"/>
        </output>       
        <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 2">
            <audio_media type="speakers_stereo"/>
            <resource resource_type="AV_AMPLIFIER_FUNCTION"/>
            <resource resource_type="AV_STEREOPROCESSOR_FUNCTION"/>
            <resource resource_type="AV_VOLUMECONTROL_FUNCTION"/>
        </output>        
        <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 3">
            <audio_media type="speakers_stereo"/>
            <resource resource_type="AV_AMPLIFIER_FUNCTION"/>
            <resource resource_type="AV_STEREOPROCESSOR_FUNCTION"/>
            <resource resource_type="AV_VOLUMECONTROL_FUNCTION"/>
        </output>        
        <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 4">
            <audio_media type="speakers_stereo"/>
            <resource resource_type="AV_AMPLIFIER_FUNCTION"/>
            <resource resource_type="AV_STEREOPROCESSOR_FUNCTION"/>
            <resource resource_type="AV_VOLUMECONTROL_FUNCTION"/>
        </output>
    </media_interfaces>
    <state_variable_list>
        <state_variable name="Power_power_setting_zone1" min_value="0" max_value="1">0</state_variable>
        <state_variable name="Power_power_setting_zone2" min_value="0" max_value="1">0</state_variable>
        <state_variable name="Power_power_setting_zone3" min_value="0" max_value="1">0</state_variable>
        <state_variable name="Power_power_setting_zone4" min_value="0" max_value="1">0</state_variable>
        <volume_state_variable name="Volume_current_volume_setting_zone1" min_value="67" max_value="128" granularity="1" owning_logical_component="Audio_processor" state_center_binding="CurrentVolume" state_center_type="integer">0</volume_state_variable>
        <volume_state_variable name="Volume_current_volume_setting_zone2" min_value="67" max_value="128" granularity="1" owning_logical_component="Audio_processor_2" state_center_binding="CurrentVolume" state_center_type="integer">0</volume_state_variable>
        <volume_state_variable name="Volume_current_volume_setting_zone3" min_value="67" max_value="128" granularity="1" owning_logical_component="Audio_processor_3" state_center_binding="CurrentVolume" state_center_type="integer">0</volume_state_variable>
        <volume_state_variable name="Volume_current_volume_setting_zone4" min_value="67" max_value="128" granularity="1" owning_logical_component="Audio_processor_4" state_center_binding="CurrentVolume" state_center_type="integer">0</volume_state_variable>
        <state_variable name="Mute_current_mute_setting_zone1" state_center_type="string" state_center_binding="CurrentMuteStatus" owning_logical_component="Audio_processor">OFF</state_variable>
        <state_variable name="Mute_current_mute_setting_zone2" state_center_type="string" state_center_binding="CurrentMuteStatus" owning_logical_component="Audio_processor_2">OFF</state_variable>
        <state_variable name="Mute_current_mute_setting_zone3" state_center_type="string" state_center_binding="CurrentMuteStatus" owning_logical_component="Audio_processor_3">OFF</state_variable>
        <state_variable name="Mute_current_mute_setting_zone4" state_center_type="string" state_center_binding="CurrentMuteStatus" owning_logical_component="Audio_processor_4">OFF</state_variable>
    </state_variable_list>    

    <logical_component logical_component_name="Audio_processor">
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 1">
                <action_to_select name="SelectSource1"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 1"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 1"/>
        </implementation>
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 2">
                <action_to_select name="SelectSource2"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 1"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 1"/>
        </implementation>
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 3">
                <action_to_select name="SelectSource3"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 1"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 1"/>
        </implementation>
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 4">
                <action_to_select name="SelectSource4"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 1"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 1"/>
        </implementation>
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 5">
                <action_to_select name="SelectSource5"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 1"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 1"/>
        </implementation>
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 6">
                <action_to_select name="SelectSource6"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 1"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 1"/>
        </implementation>
        <status_messages>
            <status_message name="CurrentSystemStatus">
                <constant type="hex">0105</constant>
                <bitmask_byte match_required="yes">                
                    <bitmask mask="0XXXXXXX">
                        <update state="CurrentPowerStatus" type="string">OFF</update>
                    </bitmask>
                    <bitmask mask="1XXXXXXX">
                        <update state="CurrentPowerStatus" type="string">ON</update>
                    </bitmask>
                    <bitmask mask="X0XXXXXX">
                        <update state="CurrentMuteStatus" type="string">OFF</update>
                    </bitmask>
                    <bitmask mask="X1XXXXXX">
                        <update state="CurrentMuteStatus" type="string">ON</update>
                    </bitmask>                    
                </bitmask_byte>               
                <data type="hex" constant_length="3">
                    <update state="UselessConstant" type="string"></update>
                </data>
                <data type="hex" constant_length="1">
                    <data_map match_required="yes">
                        <map key="01">
                            <update state="CurrentInput" type="string">Source1</update>
                        </map>
                        <map key="02">
                            <update state="CurrentInput" type="string">Source2</update>
                        </map>
                        <map key="03">
                            <update state="CurrentInput" type="string">Source3</update>
                        </map>
                        <map key="04">
                            <update state="CurrentInput" type="string">Source4</update>
                        </map>
                        <map key="05">
                            <update state="CurrentInput" type="string">Source5</update>
                        </map>
                        <map key="06">
                            <update state="CurrentInput" type="string">Source6</update>
                        </map>
                    </data_map>
                </data>
                <data type="hex" constant_length="1">
                    <update state="CurrentVolume" type="integer"></update>
                </data>   
                <data type="hex" constant_length="1">
                    <data_map match_required="yes">
                        <map key="76">
                            <update state="CurrentTreble" type="string">-10</update>
                        </map>
                        <map key="77">
                            <update state="CurrentTreble" type="string">-9</update>
                        </map>                            
                        <map key="78">
                            <update state="CurrentTreble" type="string">-8</update>
                        </map>
                        <map key="79">
                            <update state="CurrentTreble" type="string">-7</update>
                        </map>
                        <map key="7A">
                            <update state="CurrentTreble" type="string">-6</update>
                        </map>
                        <map key="7B">
                            <update state="CurrentTreble" type="string">-5</update>
                        </map>                            
                        <map key="7C">
                            <update state="CurrentTreble" type="string">-4</update>
                        </map>
                        <map key="7D">
                            <update state="CurrentTreble" type="string">-3</update>
                        </map>
                        <map key="7E">
                            <update state="CurrentTreble" type="string">-2</update>
                        </map>
                        <map key="7F">
                            <update state="CurrentTreble" type="string">-1</update>
                        </map>                            
                        <map key="80">
                            <update state="CurrentTreble" type="string">flat</update>
                        </map>
                        <map key="81">
                            <update state="CurrentTreble" type="string">+1</update>
                        </map>
                        <map key="82">
                            <update state="CurrentTreble" type="string">+2</update>
                        </map>
                        <map key="83">
                            <update state="CurrentTreble" type="string">+3</update>
                        </map>                            
                        <map key="84">
                            <update state="CurrentTreble" type="string">+4</update>
                        </map>
                        <map key="85">
                            <update state="CurrentTreble" type="string">+5</update>
                        </map>
                        <map key="86">
                            <update state="CurrentTreble" type="string">+6</update>
                        </map>
                        <map key="87">
                            <update state="CurrentTreble" type="string">+7</update>
                        </map>                            
                        <map key="88">
                            <update state="CurrentTreble" type="string">+8</update>
                        </map>
                        <map key="89">
                            <update state="CurrentTreble" type="string">+9</update>
                        </map>
                        <map key="8A">
                            <update state="CurrentTreble" type="string">+10</update>
                        </map>                       
                    </data_map>
                </data>
                <data type="hex" constant_length="1">
                    <data_map match_required="yes">
                        <map key="76">
                            <update state="CurrentBass" type="string">-10</update>
                        </map>
                        <map key="77">
                            <update state="CurrentBass" type="string">-9</update>
                        </map>                            
                        <map key="78">
                            <update state="CurrentBass" type="string">-8</update>
                        </map>
                        <map key="79">
                            <update state="CurrentBass" type="string">-7</update>
                        </map>
                        <map key="7A">
                            <update state="CurrentBass" type="string">-6</update>
                        </map>
                        <map key="7B">
                            <update state="CurrentBass" type="string">-5</update>
                        </map>                            
                        <map key="7C">
                            <update state="CurrentBass" type="string">-4</update>
                        </map>
                        <map key="7D">
                            <update state="CurrentBass" type="string">-3</update>
                        </map>
                        <map key="7E">
                            <update state="CurrentBass" type="string">-2</update>
                        </map>
                        <map key="7F">
                            <update state="CurrentBass" type="string">-1</update>
                        </map>                            
                        <map key="80">
                            <update state="CurrentBass" type="string">flat</update>
                        </map>
                        <map key="81">
                            <update state="CurrentBass" type="string">+1</update>
                        </map>
                        <map key="82">
                            <update state="CurrentBass" type="string">+2</update>
                        </map>
                        <map key="83">
                            <update state="CurrentBass" type="string">+3</update>
                        </map>                            
                        <map key="84">
                            <update state="CurrentBass" type="string">+4</update>
                        </map>
                        <map key="85">
                            <update state="CurrentBass" type="string">+5</update>
                        </map>
                        <map key="86">
                            <update state="CurrentBass" type="string">+6</update>
                        </map>
                        <map key="87">
                            <update state="CurrentBass" type="string">+7</update>
                        </map>                            
                        <map key="88">
                            <update state="CurrentBass" type="string">+8</update>
                        </map>
                        <map key="89">
                            <update state="CurrentBass" type="string">+9</update>
                        </map>
                        <map key="8A">
                            <update state="CurrentBass" type="string">+10</update>
                        </map>                       
                    </data_map>
                </data>
                <data type="hex" constant_length="1">
                    <data_map match_required="yes">
                        <map key="6E">
                            <update state="CurrentBalance" type="string">-18</update>
                        </map>
                        <map key="6F">
                            <update state="CurrentBalance" type="string">-17</update>
                        </map>
                        <map key="70">
                            <update state="CurrentBalance" type="string">-16</update>
                        </map>
                        <map key="71">
                            <update state="CurrentBalance" type="string">-15</update>
                        </map>
                        <map key="72">
                            <update state="CurrentBalance" type="string">-14</update>
                        </map>
                        <map key="73">
                            <update state="CurrentBalance" type="string">-13</update>
                        </map>
                        <map key="74">
                            <update state="CurrentBalance" type="string">-12</update>
                        </map>
                        <map key="75">
                            <update state="CurrentBalance" type="string">-11</update>
                        </map>
                        <map key="76">
                            <update state="CurrentBalance" type="string">-10</update>
                        </map>
                        <map key="77">
                            <update state="CurrentBalance" type="string">-9</update>
                        </map>
                        <map key="78">
                            <update state="CurrentBalance" type="string">-8</update>
                        </map>
                        <map key="79">
                            <update state="CurrentBalance" type="string">-7</update>
                        </map>
                        <map key="7A">
                            <update state="CurrentBalance" type="string">-6</update>
                        </map>
                        <map key="7B">
                            <update state="CurrentBalance" type="string">-5</update>
                        </map>
                        <map key="7C">
                            <update state="CurrentBalance" type="string">-4</update>
                        </map>
                        <map key="7D">
                            <update state="CurrentBalance" type="string">-3</update>
                        </map>
                        <map key="7E">
                            <update state="CurrentBalance" type="string">-2</update>
                        </map>
                        <map key="7F">
                            <update state="CurrentBalance" type="string">-1</update>
                        </map>
                        <map key="80">
                            <update state="CurrentBalance" type="string">flat</update>
                        </map>
                        <map key="81">
                            <update state="CurrentBalance" type="string">+1</update>
                        </map>
                        <map key="82">
                            <update state="CurrentBalance" type="string">+2</update>
                        </map>
                        <map key="83">
                            <update state="CurrentBalance" type="string">+3</update>
                        </map>
                        <map key="84">
                            <update state="CurrentBalance" type="string">+4</update>
                        </map>
                        <map key="85">
                            <update state="CurrentBalance" type="string">+5</update>
                        </map>
                        <map key="86">
                            <update state="CurrentBalance" type="string">+6</update>
                        </map>
                        <map key="87">
                            <update state="CurrentBalance" type="string">+7</update>
                        </map>
                        <map key="88">
                            <update state="CurrentBalance" type="string">+8</update>
                        </map>
                        <map key="89">
                            <update state="CurrentBalance" type="string">+9</update>
                        </map>
                        <map key="8A">
                            <update state="CurrentBalance" type="string">+10</update>
                        </map>
                        <map key="8B">
                            <update state="CurrentBalance" type="string">+11</update>
                        </map>
                        <map key="8C">
                            <update state="CurrentBalance" type="string">+12</update>
                        </map>
                        <map key="8D">
                            <update state="CurrentBalance" type="string">+13</update>
                        </map>
                        <map key="8E">
                            <update state="CurrentBalance" type="string">+14</update>
                        </map>
                        <map key="8F">
                            <update state="CurrentBalance" type="string">+15</update>
                        </map>
                        <map key="90">
                            <update state="CurrentBalance" type="string">+16</update>
                        </map>
                        <map key="91">
                            <update state="CurrentBalance" type="string">+17</update>
                        </map>
                        <map key="92">
                            <update state="CurrentBalance" type="string">+18</update>
                        </map>                            
                    </data_map>
                </data>
                <data type="hex" constant_length="1">
                    <update state="CommandChecksum" type="string"/>
                </data>
            </status_message>
        </status_messages>
        <universal_component_actions>
            <action name="PowerOn">
                <execute_on_state_variable_condition name="Power_power_setting_zone1" test_condition="not_equal">1</execute_on_state_variable_condition>
                <update_state_variable name="Power_power_setting_zone1" update_type="set" update_source="constant">1</update_state_variable>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <!--<command_string type="hex">020001042027</command_string>--><!--not used, as source select turns zone on-->
                        <!--<delay ms_delay="300"/>-->
                        <command_string type="hex"></command_string>
                        <delay ms_delay="0"/>
                    </command>                   
                </command_interface>
            </action>
            <action name="PowerOff">
                <update_state_variable name="Power_power_setting_zone1" update_type="set" update_source="constant">0</update_state_variable>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020001042128</command_string>
                        <delay ms_delay="300"/>
                    </command>                    
                </command_interface>
            </action>
        </universal_component_actions>
        <resource_component_actions resource_type="AV_VOLUMECONTROL_FUNCTION">
            <action name="IncreaseVolume">
                <update_volume_variables name="Volume_current_volume_setting_zone1" update_type="increment" update_source="constant">1</update_volume_variables>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020001040910</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="DecreaseVolume">
                <update_volume_variables name="Volume_current_volume_setting_zone1" update_type="decrement" update_source="constant">1</update_volume_variables>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020001040a11</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="MuteOn"> 
                <update_state_variable name="Mute_current_mute_setting_zone1" update_type="set" update_source="constant">ON</update_state_variable>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020001040d14</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="MuteOff">
                <update_state_variable name="Mute_current_mute_setting_zone1" update_type="set" update_source="constant">OFF</update_state_variable>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020001040e15</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="SetVolume">
                <action_argument name="VolumeValue" note="Value: 00~50 -> -61dB~0dB"/>
                <update_volume_variables name="Volume_current_volume_setting_zone1" update_type="set" update_source="action_argument">VolumeValue</update_volume_variables>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000115</command_string>
                        <parameter_list>
                            <volume_parameter volume_state_variable="Volume_current_volume_setting_zone1" parameter_data_type="hex" action_argument="VolumeValue" parameter_data_width="1" parameter_total_width="1"></volume_parameter>
                            <checksum_parameter parameter_data_type="hex" parameter_data_width="1" parameter_total_width="1"></checksum_parameter>
                        </parameter_list>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="DecrementBalance">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020001042b32</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="IncrementBalance">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020001042a31</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="SetBalance">
                <action_argument name="BalanceBias" note="Value: 110~146 -> 18dB Left~18dB Right"/>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000116</command_string>
                        <parameter_list>
                            <parameter parameter_data_type="hex" action_argument="BalanceBias" parameter_data_width="1" parameter_total_width="1"></parameter>
                            <checksum_parameter parameter_data_type="hex" parameter_data_width="1" parameter_total_width="1"></checksum_parameter>
                        </parameter_list>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
        </resource_component_actions>
        <resource_component_actions resource_type="AV_STEREOPROCESSOR_FUNCTION">
            <action name="IncrementBass">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000104262d</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="DecrementBass">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000104272e</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="SetBass">
                <action_argument name="BassValue" note="Value: 118~138 -> -10dB~10dB"/>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000118</command_string>
                        <parameter_list>
                            <parameter parameter_data_type="hex" action_argument="BassValue" parameter_data_width="1" parameter_total_width="1"></parameter>
                            <checksum_parameter parameter_data_type="hex" parameter_data_width="1" parameter_total_width="1"></checksum_parameter>
                        </parameter_list>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="IncrementTreble">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000104282f</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="DecrementTreble">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020001042930</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="SetTreble">
                <action_argument name="TrebleValue" note="Value: 118~138 -> -10dB~10dB"/>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000117</command_string>
                        <parameter_list>
                            <parameter parameter_data_type="hex" action_argument="TrebleValue" parameter_data_width="1" parameter_total_width="1"></parameter>
                            <checksum_parameter parameter_data_type="hex" parameter_data_width="1" parameter_total_width="1"></checksum_parameter>
                        </parameter_list>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
        </resource_component_actions>
        <custom_component_actions>
            <action name="SelectSource1">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000104030a</command_string>
                        <delay ms_delay="200"/>
                    </command>                    
                </command_interface>
            </action>
            <action name="SelectSource2">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000104040b</command_string>
                        <delay ms_delay="200"/>
                    </command>                    
                </command_interface>
            </action>
            <action name="SelectSource3">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000104050c</command_string>
                        <delay ms_delay="200"/>
                    </command>                    
                </command_interface>
            </action>
            <action name="SelectSource4">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000104060d</command_string>
                        <delay ms_delay="200"/>
                    </command>                    
                </command_interface>
            </action>
            <action name="SelectSource5">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000104070e</command_string>
                        <delay ms_delay="200"/>
                    </command>                    
                </command_interface>
            </action>
            <action name="SelectSource6">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000104080f</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>        
        </custom_component_actions>
    </logical_component>

    <logical_component logical_component_name="Audio_processor_2">
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 1">
                <action_to_select name="SelectSource1"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 2"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 2"/>
        </implementation>
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 2">
                <action_to_select name="SelectSource2"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 2"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 2"/>
        </implementation>
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 3">
                <action_to_select name="SelectSource3"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 2"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 2"/>
        </implementation>
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 4">
                <action_to_select name="SelectSource4"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 2"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 2"/>
        </implementation>
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 5">
                <action_to_select name="SelectSource5"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 2"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 2"/>
        </implementation>
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 6">
                <action_to_select name="SelectSource6"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 2"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 2"/>
        </implementation>
        <status_messages>
            <status_message name="CurrentSystemStatus">
                <constant type="hex">0205</constant>
                <bitmask_byte match_required="yes">                
                    <bitmask mask="0XXXXXXX">
                        <update state="CurrentPowerStatus" type="string">OFF</update>
                    </bitmask>
                    <bitmask mask="1XXXXXXX">
                        <update state="CurrentPowerStatus" type="string">ON</update>
                    </bitmask>
                    <bitmask mask="X0XXXXXX">
                        <update state="CurrentMuteStatus" type="string">OFF</update>
                    </bitmask>
                    <bitmask mask="X1XXXXXX">
                        <update state="CurrentMuteStatus" type="string">ON</update>
                    </bitmask>                    
                </bitmask_byte>               
                <data type="hex" constant_length="3">
                    <update state="UselessConstant" type="string"></update>
                </data>
                <data type="hex" constant_length="1">
                    <data_map match_required="yes">
                        <map key="01">
                            <update state="CurrentInput" type="string">Source1</update>
                        </map>
                        <map key="02">
                            <update state="CurrentInput" type="string">Source2</update>
                        </map>
                        <map key="03">
                            <update state="CurrentInput" type="string">Source3</update>
                        </map>
                        <map key="04">
                            <update state="CurrentInput" type="string">Source4</update>
                        </map>
                        <map key="05">
                            <update state="CurrentInput" type="string">Source5</update>
                        </map>
                        <map key="06">
                            <update state="CurrentInput" type="string">Source6</update>
                        </map>
                    </data_map>
                </data>
                <data type="hex" constant_length="1">
                    <update state="CurrentVolume" type="integer"></update>
                </data>
                <data type="hex" constant_length="1">
                    <data_map match_required="yes">
                        <map key="76">
                            <update state="CurrentTreble" type="string">-10</update>
                        </map>
                        <map key="77">
                            <update state="CurrentTreble" type="string">-9</update>
                        </map>                            
                        <map key="78">
                            <update state="CurrentTreble" type="string">-8</update>
                        </map>
                        <map key="79">
                            <update state="CurrentTreble" type="string">-7</update>
                        </map>
                        <map key="7A">
                            <update state="CurrentTreble" type="string">-6</update>
                        </map>
                        <map key="7B">
                            <update state="CurrentTreble" type="string">-5</update>
                        </map>                            
                        <map key="7C">
                            <update state="CurrentTreble" type="string">-4</update>
                        </map>
                        <map key="7D">
                            <update state="CurrentTreble" type="string">-3</update>
                        </map>
                        <map key="7E">
                            <update state="CurrentTreble" type="string">-2</update>
                        </map>
                        <map key="7F">
                            <update state="CurrentTreble" type="string">-1</update>
                        </map>                            
                        <map key="80">
                            <update state="CurrentTreble" type="string">flat</update>
                        </map>
                        <map key="81">
                            <update state="CurrentTreble" type="string">+1</update>
                        </map>
                        <map key="82">
                            <update state="CurrentTreble" type="string">+2</update>
                        </map>
                        <map key="83">
                            <update state="CurrentTreble" type="string">+3</update>
                        </map>                            
                        <map key="84">
                            <update state="CurrentTreble" type="string">+4</update>
                        </map>
                        <map key="85">
                            <update state="CurrentTreble" type="string">+5</update>
                        </map>
                        <map key="86">
                            <update state="CurrentTreble" type="string">+6</update>
                        </map>
                        <map key="87">
                            <update state="CurrentTreble" type="string">+7</update>
                        </map>                            
                        <map key="88">
                            <update state="CurrentTreble" type="string">+8</update>
                        </map>
                        <map key="89">
                            <update state="CurrentTreble" type="string">+9</update>
                        </map>
                        <map key="8A">
                            <update state="CurrentTreble" type="string">+10</update>
                        </map>                       
                    </data_map>
                </data>
                <data type="hex" constant_length="1">
                    <data_map match_required="yes">
                        <map key="76">
                            <update state="CurrentBass" type="string">-10</update>
                        </map>
                        <map key="77">
                            <update state="CurrentBass" type="string">-9</update>
                        </map>                            
                        <map key="78">
                            <update state="CurrentBass" type="string">-8</update>
                        </map>
                        <map key="79">
                            <update state="CurrentBass" type="string">-7</update>
                        </map>
                        <map key="7A">
                            <update state="CurrentBass" type="string">-6</update>
                        </map>
                        <map key="7B">
                            <update state="CurrentBass" type="string">-5</update>
                        </map>                            
                        <map key="7C">
                            <update state="CurrentBass" type="string">-4</update>
                        </map>
                        <map key="7D">
                            <update state="CurrentBass" type="string">-3</update>
                        </map>
                        <map key="7E">
                            <update state="CurrentBass" type="string">-2</update>
                        </map>
                        <map key="7F">
                            <update state="CurrentBass" type="string">-1</update>
                        </map>                            
                        <map key="80">
                            <update state="CurrentBass" type="string">flat</update>
                        </map>
                        <map key="81">
                            <update state="CurrentBass" type="string">+1</update>
                        </map>
                        <map key="82">
                            <update state="CurrentBass" type="string">+2</update>
                        </map>
                        <map key="83">
                            <update state="CurrentBass" type="string">+3</update>
                        </map>                            
                        <map key="84">
                            <update state="CurrentBass" type="string">+4</update>
                        </map>
                        <map key="85">
                            <update state="CurrentBass" type="string">+5</update>
                        </map>
                        <map key="86">
                            <update state="CurrentBass" type="string">+6</update>
                        </map>
                        <map key="87">
                            <update state="CurrentBass" type="string">+7</update>
                        </map>                            
                        <map key="88">
                            <update state="CurrentBass" type="string">+8</update>
                        </map>
                        <map key="89">
                            <update state="CurrentBass" type="string">+9</update>
                        </map>
                        <map key="8A">
                            <update state="CurrentBass" type="string">+10</update>
                        </map>                       
                    </data_map>
                </data>
                <data type="hex" constant_length="1">
                    <data_map match_required="yes">
                        <map key="6E">
                            <update state="CurrentBalance" type="string">-18</update>
                        </map>
                        <map key="6F">
                            <update state="CurrentBalance" type="string">-17</update>
                        </map>
                        <map key="70">
                            <update state="CurrentBalance" type="string">-16</update>
                        </map>
                        <map key="71">
                            <update state="CurrentBalance" type="string">-15</update>
                        </map>
                        <map key="72">
                            <update state="CurrentBalance" type="string">-14</update>
                        </map>
                        <map key="73">
                            <update state="CurrentBalance" type="string">-13</update>
                        </map>
                        <map key="74">
                            <update state="CurrentBalance" type="string">-12</update>
                        </map>
                        <map key="75">
                            <update state="CurrentBalance" type="string">-11</update>
                        </map>
                        <map key="76">
                            <update state="CurrentBalance" type="string">-10</update>
                        </map>
                        <map key="77">
                            <update state="CurrentBalance" type="string">-9</update>
                        </map>
                        <map key="78">
                            <update state="CurrentBalance" type="string">-8</update>
                        </map>
                        <map key="79">
                            <update state="CurrentBalance" type="string">-7</update>
                        </map>
                        <map key="7A">
                            <update state="CurrentBalance" type="string">-6</update>
                        </map>
                        <map key="7B">
                            <update state="CurrentBalance" type="string">-5</update>
                        </map>
                        <map key="7C">
                            <update state="CurrentBalance" type="string">-4</update>
                        </map>
                        <map key="7D">
                            <update state="CurrentBalance" type="string">-3</update>
                        </map>
                        <map key="7E">
                            <update state="CurrentBalance" type="string">-2</update>
                        </map>
                        <map key="7F">
                            <update state="CurrentBalance" type="string">-1</update>
                        </map>
                        <map key="80">
                            <update state="CurrentBalance" type="string">flat</update>
                        </map>
                        <map key="81">
                            <update state="CurrentBalance" type="string">+1</update>
                        </map>
                        <map key="82">
                            <update state="CurrentBalance" type="string">+2</update>
                        </map>
                        <map key="83">
                            <update state="CurrentBalance" type="string">+3</update>
                        </map>
                        <map key="84">
                            <update state="CurrentBalance" type="string">+4</update>
                        </map>
                        <map key="85">
                            <update state="CurrentBalance" type="string">+5</update>
                        </map>
                        <map key="86">
                            <update state="CurrentBalance" type="string">+6</update>
                        </map>
                        <map key="87">
                            <update state="CurrentBalance" type="string">+7</update>
                        </map>
                        <map key="88">
                            <update state="CurrentBalance" type="string">+8</update>
                        </map>
                        <map key="89">
                            <update state="CurrentBalance" type="string">+9</update>
                        </map>
                        <map key="8A">
                            <update state="CurrentBalance" type="string">+10</update>
                        </map>
                        <map key="8B">
                            <update state="CurrentBalance" type="string">+11</update>
                        </map>
                        <map key="8C">
                            <update state="CurrentBalance" type="string">+12</update>
                        </map>
                        <map key="8D">
                            <update state="CurrentBalance" type="string">+13</update>
                        </map>
                        <map key="8E">
                            <update state="CurrentBalance" type="string">+14</update>
                        </map>
                        <map key="8F">
                            <update state="CurrentBalance" type="string">+15</update>
                        </map>
                        <map key="90">
                            <update state="CurrentBalance" type="string">+16</update>
                        </map>
                        <map key="91">
                            <update state="CurrentBalance" type="string">+17</update>
                        </map>
                        <map key="92">
                            <update state="CurrentBalance" type="string">+18</update>
                        </map>                            
                    </data_map>
                </data>
                <data type="hex" constant_length="1">
                    <update state="CommandChecksum" type="string"/>
                </data>
            </status_message>
        </status_messages>
        <universal_component_actions>
            <action name="PowerOn">
                <execute_on_state_variable_condition name="Power_power_setting_zone2" test_condition="not_equal">1</execute_on_state_variable_condition>
                <update_state_variable name="Power_power_setting_zone2" update_type="set" update_source="constant">1</update_state_variable>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <!--<command_string type="hex">020002042028</command_string>--><!--not used, as source select turns zone on-->
                        <!--<delay ms_delay="300"/>-->
                        <command_string type="hex"></command_string>
                        <delay ms_delay="0"/>
                    </command>                   
                </command_interface>
            </action>
            <action name="PowerOff">
                <update_state_variable name="Power_power_setting_zone2" update_type="set" update_source="constant">0</update_state_variable>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020002042129</command_string>
                        <delay ms_delay="300"/>
                    </command>                    
                </command_interface>
            </action>
        </universal_component_actions>
        <resource_component_actions resource_type="AV_VOLUMECONTROL_FUNCTION">
            <action name="IncreaseVolume">
                <update_volume_variables name="Volume_current_volume_setting_zone2" update_type="increment" update_source="constant">1</update_volume_variables>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020002040911</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="DecreaseVolume">
                <update_volume_variables name="Volume_current_volume_setting_zone2" update_type="decrement" update_source="constant">1</update_volume_variables>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020002040a12</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="MuteOn"> 
                <update_state_variable name="Mute_current_mute_setting_zone2" update_type="set" update_source="constant">ON</update_state_variable>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020002040d15</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="MuteOff">
                <update_state_variable name="Mute_current_mute_setting_zone2" update_type="set" update_source="constant">OFF</update_state_variable>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020002040e16</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="SetVolume">
                <action_argument name="VolumeValue" note="Value: 00~50 -> -61dB~0dB"/>
                <update_volume_variables name="Volume_current_volume_setting_zone2" update_type="set" update_source="action_argument">VolumeValue</update_volume_variables>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000215</command_string>
                        <parameter_list>
                            <volume_parameter volume_state_variable="Volume_current_volume_setting_zone2" parameter_data_type="hex" action_argument="VolumeValue" parameter_data_width="1" parameter_total_width="1"></volume_parameter>
                            <checksum_parameter parameter_data_type="hex" parameter_data_width="1" parameter_total_width="1"></checksum_parameter>
                        </parameter_list>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="DecrementBalance">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020002042b33</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="IncrementBalance">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020002042a32</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="SetBalance">
                <action_argument name="BalanceBias" note="Value: 110~146 -> 18dB Left~18dB Right"/>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000216</command_string>
                        <parameter_list>
                            <parameter parameter_data_type="hex" action_argument="BalanceBias" parameter_data_width="1" parameter_total_width="1"></parameter>
                            <checksum_parameter parameter_data_type="hex" parameter_data_width="1" parameter_total_width="1"></checksum_parameter>
                        </parameter_list>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action> 
        </resource_component_actions>
        <resource_component_actions resource_type="AV_STEREOPROCESSOR_FUNCTION">
            <action name="IncrementBass">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000204262e</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="DecrementBass">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000204272f</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="SetBass">
                <action_argument name="BassValue" note="Value: 118~138 -> -10dB~10dB"/>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000218</command_string>
                        <parameter_list>
                            <parameter parameter_data_type="hex" action_argument="BassValue" parameter_data_width="1" parameter_total_width="1"></parameter>
                            <checksum_parameter parameter_data_type="hex" parameter_data_width="1" parameter_total_width="1"></checksum_parameter>
                        </parameter_list>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="IncrementTreble">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020002042830</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="DecrementTreble">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020002042931</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="SetTreble">
                <action_argument name="TrebleValue" note="Value: 118~138 -> -10dB~10dB"/>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000217</command_string>
                        <parameter_list>
                            <parameter parameter_data_type="hex" action_argument="TrebleValue" parameter_data_width="1" parameter_total_width="1"></parameter>
                            <checksum_parameter parameter_data_type="hex" parameter_data_width="1" parameter_total_width="1"></checksum_parameter>
                        </parameter_list>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>           
        </resource_component_actions>
        <custom_component_actions>
            <action name="SelectSource1">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000204030b</command_string>
                        <delay ms_delay="200"/>
                    </command>                    
                </command_interface>
            </action>
            <action name="SelectSource2">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000204040c</command_string>
                        <delay ms_delay="200"/>
                    </command>                    
                </command_interface>
            </action>
            <action name="SelectSource3">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000204050d</command_string>
                        <delay ms_delay="200"/>
                    </command>                    
                </command_interface>
            </action>
            <action name="SelectSource4">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000204060e</command_string>
                        <delay ms_delay="200"/>
                    </command>                    
                </command_interface>
            </action>
            <action name="SelectSource5">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000204070f</command_string>
                        <delay ms_delay="200"/>
                    </command>                    
                </command_interface>
            </action>
            <action name="SelectSource6">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020002040810</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>        
        </custom_component_actions>
    </logical_component>

    <logical_component logical_component_name="Audio_processor_3">
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 1">
                <action_to_select name="SelectSource1"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 3"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 3"/>
        </implementation>
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 2">
                <action_to_select name="SelectSource2"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 3"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 3"/>
        </implementation>
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 3">
                <action_to_select name="SelectSource3"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 3"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 3"/>
        </implementation>
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 4">
                <action_to_select name="SelectSource4"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 3"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 3"/>
        </implementation>
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 5">
                <action_to_select name="SelectSource5"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 3"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 3"/>
        </implementation>
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 6">
                <action_to_select name="SelectSource6"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 3"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 3"/>
        </implementation>
        <status_messages>
            <status_message name="CurrentSystemStatus">
                <constant type="hex">0305</constant>
                <bitmask_byte match_required="yes">                
                    <bitmask mask="0XXXXXXX">
                        <update state="CurrentPowerStatus" type="string">OFF</update>
                    </bitmask>
                    <bitmask mask="1XXXXXXX">
                        <update state="CurrentPowerStatus" type="string">ON</update>
                    </bitmask>
                    <bitmask mask="X0XXXXXX">
                        <update state="CurrentMuteStatus" type="string">OFF</update>
                    </bitmask>
                    <bitmask mask="X1XXXXXX">
                        <update state="CurrentMuteStatus" type="string">ON</update>
                    </bitmask>                    
                </bitmask_byte>               
                <data type="hex" constant_length="3">
                    <update state="UselessConstant" type="string"></update>
                </data>
                <data type="hex" constant_length="1">
                    <data_map match_required="yes">
                        <map key="01">
                            <update state="CurrentInput" type="string">Source1</update>
                        </map>
                        <map key="02">
                            <update state="CurrentInput" type="string">Source2</update>
                        </map>
                        <map key="03">
                            <update state="CurrentInput" type="string">Source3</update>
                        </map>
                        <map key="04">
                            <update state="CurrentInput" type="string">Source4</update>
                        </map>
                        <map key="05">
                            <update state="CurrentInput" type="string">Source5</update>
                        </map>
                        <map key="06">
                            <update state="CurrentInput" type="string">Source6</update>
                        </map>
                    </data_map>
                </data>
                <data type="hex" constant_length="1">
                    <update state="CurrentVolume" type="integer"></update>
                </data>
                <data type="hex" constant_length="1">
                    <data_map match_required="yes">
                        <map key="76">
                            <update state="CurrentTreble" type="string">-10</update>
                        </map>
                        <map key="77">
                            <update state="CurrentTreble" type="string">-9</update>
                        </map>                            
                        <map key="78">
                            <update state="CurrentTreble" type="string">-8</update>
                        </map>
                        <map key="79">
                            <update state="CurrentTreble" type="string">-7</update>
                        </map>
                        <map key="7A">
                            <update state="CurrentTreble" type="string">-6</update>
                        </map>
                        <map key="7B">
                            <update state="CurrentTreble" type="string">-5</update>
                        </map>                            
                        <map key="7C">
                            <update state="CurrentTreble" type="string">-4</update>
                        </map>
                        <map key="7D">
                            <update state="CurrentTreble" type="string">-3</update>
                        </map>
                        <map key="7E">
                            <update state="CurrentTreble" type="string">-2</update>
                        </map>
                        <map key="7F">
                            <update state="CurrentTreble" type="string">-1</update>
                        </map>                            
                        <map key="80">
                            <update state="CurrentTreble" type="string">flat</update>
                        </map>
                        <map key="81">
                            <update state="CurrentTreble" type="string">+1</update>
                        </map>
                        <map key="82">
                            <update state="CurrentTreble" type="string">+2</update>
                        </map>
                        <map key="83">
                            <update state="CurrentTreble" type="string">+3</update>
                        </map>                            
                        <map key="84">
                            <update state="CurrentTreble" type="string">+4</update>
                        </map>
                        <map key="85">
                            <update state="CurrentTreble" type="string">+5</update>
                        </map>
                        <map key="86">
                            <update state="CurrentTreble" type="string">+6</update>
                        </map>
                        <map key="87">
                            <update state="CurrentTreble" type="string">+7</update>
                        </map>                            
                        <map key="88">
                            <update state="CurrentTreble" type="string">+8</update>
                        </map>
                        <map key="89">
                            <update state="CurrentTreble" type="string">+9</update>
                        </map>
                        <map key="8A">
                            <update state="CurrentTreble" type="string">+10</update>
                        </map>                       
                    </data_map>
                </data>
                <data type="hex" constant_length="1">
                    <data_map match_required="yes">
                        <map key="76">
                            <update state="CurrentBass" type="string">-10</update>
                        </map>
                        <map key="77">
                            <update state="CurrentBass" type="string">-9</update>
                        </map>                            
                        <map key="78">
                            <update state="CurrentBass" type="string">-8</update>
                        </map>
                        <map key="79">
                            <update state="CurrentBass" type="string">-7</update>
                        </map>
                        <map key="7A">
                            <update state="CurrentBass" type="string">-6</update>
                        </map>
                        <map key="7B">
                            <update state="CurrentBass" type="string">-5</update>
                        </map>                            
                        <map key="7C">
                            <update state="CurrentBass" type="string">-4</update>
                        </map>
                        <map key="7D">
                            <update state="CurrentBass" type="string">-3</update>
                        </map>
                        <map key="7E">
                            <update state="CurrentBass" type="string">-2</update>
                        </map>
                        <map key="7F">
                            <update state="CurrentBass" type="string">-1</update>
                        </map>                            
                        <map key="80">
                            <update state="CurrentBass" type="string">flat</update>
                        </map>
                        <map key="81">
                            <update state="CurrentBass" type="string">+1</update>
                        </map>
                        <map key="82">
                            <update state="CurrentBass" type="string">+2</update>
                        </map>
                        <map key="83">
                            <update state="CurrentBass" type="string">+3</update>
                        </map>                            
                        <map key="84">
                            <update state="CurrentBass" type="string">+4</update>
                        </map>
                        <map key="85">
                            <update state="CurrentBass" type="string">+5</update>
                        </map>
                        <map key="86">
                            <update state="CurrentBass" type="string">+6</update>
                        </map>
                        <map key="87">
                            <update state="CurrentBass" type="string">+7</update>
                        </map>                            
                        <map key="88">
                            <update state="CurrentBass" type="string">+8</update>
                        </map>
                        <map key="89">
                            <update state="CurrentBass" type="string">+9</update>
                        </map>
                        <map key="8A">
                            <update state="CurrentBass" type="string">+10</update>
                        </map>                       
                    </data_map>
                </data>
                <data type="hex" constant_length="1">
                    <data_map match_required="yes">
                        <map key="6E">
                            <update state="CurrentBalance" type="string">-18</update>
                        </map>
                        <map key="6F">
                            <update state="CurrentBalance" type="string">-17</update>
                        </map>
                        <map key="70">
                            <update state="CurrentBalance" type="string">-16</update>
                        </map>
                        <map key="71">
                            <update state="CurrentBalance" type="string">-15</update>
                        </map>
                        <map key="72">
                            <update state="CurrentBalance" type="string">-14</update>
                        </map>
                        <map key="73">
                            <update state="CurrentBalance" type="string">-13</update>
                        </map>
                        <map key="74">
                            <update state="CurrentBalance" type="string">-12</update>
                        </map>
                        <map key="75">
                            <update state="CurrentBalance" type="string">-11</update>
                        </map>
                        <map key="76">
                            <update state="CurrentBalance" type="string">-10</update>
                        </map>
                        <map key="77">
                            <update state="CurrentBalance" type="string">-9</update>
                        </map>
                        <map key="78">
                            <update state="CurrentBalance" type="string">-8</update>
                        </map>
                        <map key="79">
                            <update state="CurrentBalance" type="string">-7</update>
                        </map>
                        <map key="7A">
                            <update state="CurrentBalance" type="string">-6</update>
                        </map>
                        <map key="7B">
                            <update state="CurrentBalance" type="string">-5</update>
                        </map>
                        <map key="7C">
                            <update state="CurrentBalance" type="string">-4</update>
                        </map>
                        <map key="7D">
                            <update state="CurrentBalance" type="string">-3</update>
                        </map>
                        <map key="7E">
                            <update state="CurrentBalance" type="string">-2</update>
                        </map>
                        <map key="7F">
                            <update state="CurrentBalance" type="string">-1</update>
                        </map>
                        <map key="80">
                            <update state="CurrentBalance" type="string">flat</update>
                        </map>
                        <map key="81">
                            <update state="CurrentBalance" type="string">+1</update>
                        </map>
                        <map key="82">
                            <update state="CurrentBalance" type="string">+2</update>
                        </map>
                        <map key="83">
                            <update state="CurrentBalance" type="string">+3</update>
                        </map>
                        <map key="84">
                            <update state="CurrentBalance" type="string">+4</update>
                        </map>
                        <map key="85">
                            <update state="CurrentBalance" type="string">+5</update>
                        </map>
                        <map key="86">
                            <update state="CurrentBalance" type="string">+6</update>
                        </map>
                        <map key="87">
                            <update state="CurrentBalance" type="string">+7</update>
                        </map>
                        <map key="88">
                            <update state="CurrentBalance" type="string">+8</update>
                        </map>
                        <map key="89">
                            <update state="CurrentBalance" type="string">+9</update>
                        </map>
                        <map key="8A">
                            <update state="CurrentBalance" type="string">+10</update>
                        </map>
                        <map key="8B">
                            <update state="CurrentBalance" type="string">+11</update>
                        </map>
                        <map key="8C">
                            <update state="CurrentBalance" type="string">+12</update>
                        </map>
                        <map key="8D">
                            <update state="CurrentBalance" type="string">+13</update>
                        </map>
                        <map key="8E">
                            <update state="CurrentBalance" type="string">+14</update>
                        </map>
                        <map key="8F">
                            <update state="CurrentBalance" type="string">+15</update>
                        </map>
                        <map key="90">
                            <update state="CurrentBalance" type="string">+16</update>
                        </map>
                        <map key="91">
                            <update state="CurrentBalance" type="string">+17</update>
                        </map>
                        <map key="92">
                            <update state="CurrentBalance" type="string">+18</update>
                        </map>                            
                    </data_map>
                </data>
                <data type="hex" constant_length="1">
                    <update state="CommandChecksum" type="string"/>
                </data>
            </status_message>
        </status_messages>
        <universal_component_actions>
            <action name="PowerOn">
                <execute_on_state_variable_condition name="Power_power_setting_zone3" test_condition="not_equal">1</execute_on_state_variable_condition>
                <update_state_variable name="Power_power_setting_zone3" update_type="set" update_source="constant">1</update_state_variable>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <!--<command_string type="hex">020003042029</command_string>--><!--not used, as source select turns zone on-->
                        <!--<delay ms_delay="300"/>-->
                        <command_string type="hex"></command_string>
                        <delay ms_delay="0"/>
                    </command>                   
                </command_interface>
            </action>
            <action name="PowerOff">
                <update_state_variable name="Power_power_setting_zone3" update_type="set" update_source="constant">0</update_state_variable>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000304212a</command_string>
                        <delay ms_delay="300"/>
                    </command>                    
                </command_interface>
            </action>
        </universal_component_actions>
        <resource_component_actions resource_type="AV_VOLUMECONTROL_FUNCTION">
            <action name="IncreaseVolume">
                <update_volume_variables name="Volume_current_volume_setting_zone3" update_type="increment" update_source="constant">1</update_volume_variables>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020003040912</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="DecreaseVolume">
                <update_volume_variables name="Volume_current_volume_setting_zone3" update_type="decrement" update_source="constant">1</update_volume_variables>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020003040a13</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="MuteOn"> 
                <update_state_variable name="Mute_current_mute_setting_zone3" update_type="set" update_source="constant">ON</update_state_variable>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020003040d16</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="MuteOff">
                <update_state_variable name="Mute_current_mute_setting_zone3" update_type="set" update_source="constant">OFF</update_state_variable>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020003040e17</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="SetVolume">
                <action_argument name="VolumeValue" note="Value: 00~50 -> -61dB~0dB"/>
                <update_volume_variables name="Volume_current_volume_setting_zone3" update_type="set" update_source="action_argument">VolumeValue</update_volume_variables>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000315</command_string>
                        <parameter_list>
                            <volume_parameter volume_state_variable="Volume_current_volume_setting_zone3" parameter_data_type="hex" action_argument="VolumeValue" parameter_data_width="1" parameter_total_width="1"></volume_parameter>
                            <checksum_parameter parameter_data_type="hex" parameter_data_width="1" parameter_total_width="1"></checksum_parameter>
                        </parameter_list>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="DecrementBalance">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020003042b34</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="IncrementBalance">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020003042a33</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="SetBalance">
                <action_argument name="BalanceBias" note="Value: 110~146 -> 18dB Left~18dB Right"/>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000316</command_string>
                        <parameter_list>
                            <parameter parameter_data_type="hex" action_argument="BalanceBias" parameter_data_width="1" parameter_total_width="1"></parameter>
                            <checksum_parameter parameter_data_type="hex" parameter_data_width="1" parameter_total_width="1"></checksum_parameter>
                        </parameter_list>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
        </resource_component_actions>
        <resource_component_actions resource_type="AV_STEREOPROCESSOR_FUNCTION">
            <action name="IncrementBass">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000304262f</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="DecrementBass">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020003042730</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="SetBass">
                <action_argument name="BassValue" note="Value: 118~138 -> -10dB~10dB"/>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000318</command_string>
                        <parameter_list>
                            <parameter parameter_data_type="hex" action_argument="BassValue" parameter_data_width="1" parameter_total_width="1"></parameter>
                            <checksum_parameter parameter_data_type="hex" parameter_data_width="1" parameter_total_width="1"></checksum_parameter>
                        </parameter_list>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="IncrementTreble">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020003042831</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="DecrementTreble">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020003042932</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="SetTreble">
                <action_argument name="TrebleValue" note="Value: 118~138 -> -10dB~10dB"/>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000317</command_string>
                        <parameter_list>
                            <parameter parameter_data_type="hex" action_argument="TrebleValue" parameter_data_width="1" parameter_total_width="1"></parameter>
                            <checksum_parameter parameter_data_type="hex" parameter_data_width="1" parameter_total_width="1"></checksum_parameter>
                        </parameter_list>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
        </resource_component_actions>
        <custom_component_actions>
            <action name="SelectSource1">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000304030c</command_string>
                        <delay ms_delay="200"/>
                    </command>                    
                </command_interface>
            </action>
            <action name="SelectSource2">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000304040d</command_string>
                        <delay ms_delay="200"/>
                    </command>                    
                </command_interface>
            </action>
            <action name="SelectSource3">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000304050e</command_string>
                        <delay ms_delay="200"/>
                    </command>                    
                </command_interface>
            </action>
            <action name="SelectSource4">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000304060f</command_string>
                        <delay ms_delay="200"/>
                    </command>                    
                </command_interface>
            </action>
            <action name="SelectSource5">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020003040710</command_string>
                        <delay ms_delay="200"/>
                    </command>                    
                </command_interface>
            </action>
            <action name="SelectSource6">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020003040811</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>        
        </custom_component_actions>
    </logical_component>

    <logical_component logical_component_name="Audio_processor_4">
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 1">
                <action_to_select name="SelectSource1"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 4"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 4"/>
        </implementation>
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 2">
                <action_to_select name="SelectSource2"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 4"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 4"/>
        </implementation>
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 3">
                <action_to_select name="SelectSource3"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 4"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 4"/>
        </implementation>
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 4">
                <action_to_select name="SelectSource4"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 4"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 4"/>
        </implementation>
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 5">
                <action_to_select name="SelectSource5"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 4"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 4"/>
        </implementation>
        <implementation>
            <input name_on_component="SOURCE  AUDIO CONNECTIONS IN 6">
                <action_to_select name="SelectSource6"/>
            </input>
            <output name_on_component="ZONE AUDIO (TO AMP) OUTPUT 4"/>
            <output name_on_component="ZONE OUTPUT TO 8 OHM SPEAKERS 4"/>
        </implementation>
        <status_messages>
            <status_message name="CurrentSystemStatus">
                <constant type="hex">0405</constant>
                <bitmask_byte match_required="yes">                
                    <bitmask mask="0XXXXXXX">
                        <update state="CurrentPowerStatus" type="string">OFF</update>
                    </bitmask>
                    <bitmask mask="1XXXXXXX">
                        <update state="CurrentPowerStatus" type="string">ON</update>
                    </bitmask>
                    <bitmask mask="X0XXXXXX">
                        <update state="CurrentMuteStatus" type="string">OFF</update>
                    </bitmask>
                    <bitmask mask="X1XXXXXX">
                        <update state="CurrentMuteStatus" type="string">ON</update>
                    </bitmask>                    
                </bitmask_byte>               
                <data type="hex" constant_length="3">
                    <update state="UselessConstant" type="string"></update>
                </data>
                <data type="hex" constant_length="1">
                    <data_map match_required="yes">
                        <map key="01">
                            <update state="CurrentInput" type="string">Source1</update>
                        </map>
                        <map key="02">
                            <update state="CurrentInput" type="string">Source2</update>
                        </map>
                        <map key="03">
                            <update state="CurrentInput" type="string">Source3</update>
                        </map>
                        <map key="04">
                            <update state="CurrentInput" type="string">Source4</update>
                        </map>
                        <map key="05">
                            <update state="CurrentInput" type="string">Source5</update>
                        </map>
                        <map key="06">
                            <update state="CurrentInput" type="string">Source6</update>
                        </map>
                    </data_map>
                </data>
                <data type="hex" constant_length="1">
                    <update state="CurrentVolume" type="integer"></update>
                </data>
                <data type="hex" constant_length="1">
                    <data_map match_required="yes">
                        <map key="76">
                            <update state="CurrentTreble" type="string">-10</update>
                        </map>
                        <map key="77">
                            <update state="CurrentTreble" type="string">-9</update>
                        </map>                            
                        <map key="78">
                            <update state="CurrentTreble" type="string">-8</update>
                        </map>
                        <map key="79">
                            <update state="CurrentTreble" type="string">-7</update>
                        </map>
                        <map key="7A">
                            <update state="CurrentTreble" type="string">-6</update>
                        </map>
                        <map key="7B">
                            <update state="CurrentTreble" type="string">-5</update>
                        </map>                            
                        <map key="7C">
                            <update state="CurrentTreble" type="string">-4</update>
                        </map>
                        <map key="7D">
                            <update state="CurrentTreble" type="string">-3</update>
                        </map>
                        <map key="7E">
                            <update state="CurrentTreble" type="string">-2</update>
                        </map>
                        <map key="7F">
                            <update state="CurrentTreble" type="string">-1</update>
                        </map>                            
                        <map key="80">
                            <update state="CurrentTreble" type="string">flat</update>
                        </map>
                        <map key="81">
                            <update state="CurrentTreble" type="string">+1</update>
                        </map>
                        <map key="82">
                            <update state="CurrentTreble" type="string">+2</update>
                        </map>
                        <map key="83">
                            <update state="CurrentTreble" type="string">+3</update>
                        </map>                            
                        <map key="84">
                            <update state="CurrentTreble" type="string">+4</update>
                        </map>
                        <map key="85">
                            <update state="CurrentTreble" type="string">+5</update>
                        </map>
                        <map key="86">
                            <update state="CurrentTreble" type="string">+6</update>
                        </map>
                        <map key="87">
                            <update state="CurrentTreble" type="string">+7</update>
                        </map>                            
                        <map key="88">
                            <update state="CurrentTreble" type="string">+8</update>
                        </map>
                        <map key="89">
                            <update state="CurrentTreble" type="string">+9</update>
                        </map>
                        <map key="8A">
                            <update state="CurrentTreble" type="string">+10</update>
                        </map>                       
                    </data_map>
                </data>
                <data type="hex" constant_length="1">
                    <data_map match_required="yes">
                        <map key="76">
                            <update state="CurrentBass" type="string">-10</update>
                        </map>
                        <map key="77">
                            <update state="CurrentBass" type="string">-9</update>
                        </map>                            
                        <map key="78">
                            <update state="CurrentBass" type="string">-8</update>
                        </map>
                        <map key="79">
                            <update state="CurrentBass" type="string">-7</update>
                        </map>
                        <map key="7A">
                            <update state="CurrentBass" type="string">-6</update>
                        </map>
                        <map key="7B">
                            <update state="CurrentBass" type="string">-5</update>
                        </map>                            
                        <map key="7C">
                            <update state="CurrentBass" type="string">-4</update>
                        </map>
                        <map key="7D">
                            <update state="CurrentBass" type="string">-3</update>
                        </map>
                        <map key="7E">
                            <update state="CurrentBass" type="string">-2</update>
                        </map>
                        <map key="7F">
                            <update state="CurrentBass" type="string">-1</update>
                        </map>                            
                        <map key="80">
                            <update state="CurrentBass" type="string">flat</update>
                        </map>
                        <map key="81">
                            <update state="CurrentBass" type="string">+1</update>
                        </map>
                        <map key="82">
                            <update state="CurrentBass" type="string">+2</update>
                        </map>
                        <map key="83">
                            <update state="CurrentBass" type="string">+3</update>
                        </map>                            
                        <map key="84">
                            <update state="CurrentBass" type="string">+4</update>
                        </map>
                        <map key="85">
                            <update state="CurrentBass" type="string">+5</update>
                        </map>
                        <map key="86">
                            <update state="CurrentBass" type="string">+6</update>
                        </map>
                        <map key="87">
                            <update state="CurrentBass" type="string">+7</update>
                        </map>                            
                        <map key="88">
                            <update state="CurrentBass" type="string">+8</update>
                        </map>
                        <map key="89">
                            <update state="CurrentBass" type="string">+9</update>
                        </map>
                        <map key="8A">
                            <update state="CurrentBass" type="string">+10</update>
                        </map>                       
                    </data_map>
                </data>
                <data type="hex" constant_length="1">
                    <data_map match_required="yes">
                        <map key="6E">
                            <update state="CurrentBalance" type="string">-18</update>
                        </map>
                        <map key="6F">
                            <update state="CurrentBalance" type="string">-17</update>
                        </map>
                        <map key="70">
                            <update state="CurrentBalance" type="string">-16</update>
                        </map>
                        <map key="71">
                            <update state="CurrentBalance" type="string">-15</update>
                        </map>
                        <map key="72">
                            <update state="CurrentBalance" type="string">-14</update>
                        </map>
                        <map key="73">
                            <update state="CurrentBalance" type="string">-13</update>
                        </map>
                        <map key="74">
                            <update state="CurrentBalance" type="string">-12</update>
                        </map>
                        <map key="75">
                            <update state="CurrentBalance" type="string">-11</update>
                        </map>
                        <map key="76">
                            <update state="CurrentBalance" type="string">-10</update>
                        </map>
                        <map key="77">
                            <update state="CurrentBalance" type="string">-9</update>
                        </map>
                        <map key="78">
                            <update state="CurrentBalance" type="string">-8</update>
                        </map>
                        <map key="79">
                            <update state="CurrentBalance" type="string">-7</update>
                        </map>
                        <map key="7A">
                            <update state="CurrentBalance" type="string">-6</update>
                        </map>
                        <map key="7B">
                            <update state="CurrentBalance" type="string">-5</update>
                        </map>
                        <map key="7C">
                            <update state="CurrentBalance" type="string">-4</update>
                        </map>
                        <map key="7D">
                            <update state="CurrentBalance" type="string">-3</update>
                        </map>
                        <map key="7E">
                            <update state="CurrentBalance" type="string">-2</update>
                        </map>
                        <map key="7F">
                            <update state="CurrentBalance" type="string">-1</update>
                        </map>
                        <map key="80">
                            <update state="CurrentBalance" type="string">flat</update>
                        </map>
                        <map key="81">
                            <update state="CurrentBalance" type="string">+1</update>
                        </map>
                        <map key="82">
                            <update state="CurrentBalance" type="string">+2</update>
                        </map>
                        <map key="83">
                            <update state="CurrentBalance" type="string">+3</update>
                        </map>
                        <map key="84">
                            <update state="CurrentBalance" type="string">+4</update>
                        </map>
                        <map key="85">
                            <update state="CurrentBalance" type="string">+5</update>
                        </map>
                        <map key="86">
                            <update state="CurrentBalance" type="string">+6</update>
                        </map>
                        <map key="87">
                            <update state="CurrentBalance" type="string">+7</update>
                        </map>
                        <map key="88">
                            <update state="CurrentBalance" type="string">+8</update>
                        </map>
                        <map key="89">
                            <update state="CurrentBalance" type="string">+9</update>
                        </map>
                        <map key="8A">
                            <update state="CurrentBalance" type="string">+10</update>
                        </map>
                        <map key="8B">
                            <update state="CurrentBalance" type="string">+11</update>
                        </map>
                        <map key="8C">
                            <update state="CurrentBalance" type="string">+12</update>
                        </map>
                        <map key="8D">
                            <update state="CurrentBalance" type="string">+13</update>
                        </map>
                        <map key="8E">
                            <update state="CurrentBalance" type="string">+14</update>
                        </map>
                        <map key="8F">
                            <update state="CurrentBalance" type="string">+15</update>
                        </map>
                        <map key="90">
                            <update state="CurrentBalance" type="string">+16</update>
                        </map>
                        <map key="91">
                            <update state="CurrentBalance" type="string">+17</update>
                        </map>
                        <map key="92">
                            <update state="CurrentBalance" type="string">+18</update>
                        </map>                            
                    </data_map>
                </data>
                <data type="hex" constant_length="1">
                    <update state="CommandChecksum" type="string"/>
                </data>
            </status_message>
        </status_messages>
        <universal_component_actions>
            <action name="PowerOn">
                <execute_on_state_variable_condition name="Power_power_setting_zone4" test_condition="not_equal">1</execute_on_state_variable_condition>
                <update_state_variable name="Power_power_setting_zone4" update_type="set" update_source="constant">1</update_state_variable>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <!--<command_string type="hex">02000404202a</command_string>--><!--not used, as source select turns zone on-->
                        <!--<delay ms_delay="300"/>-->
                        <command_string type="hex"></command_string>
                        <delay ms_delay="0"/>
                    </command>                   
                </command_interface>
            </action>
            <action name="PowerOff">
                <update_state_variable name="Power_power_setting_zone4" update_type="set" update_source="constant">0</update_state_variable>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000404212b</command_string>
                        <delay ms_delay="300"/>
                    </command>                    
                </command_interface>
            </action>
        </universal_component_actions>
        <resource_component_actions resource_type="AV_VOLUMECONTROL_FUNCTION">
            <action name="IncreaseVolume">
                <update_volume_variables name="Volume_current_volume_setting_zone4" update_type="increment" update_source="constant">1</update_volume_variables>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020004040913</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="DecreaseVolume">
                <update_volume_variables name="Volume_current_volume_setting_zone4" update_type="decrement" update_source="constant">1</update_volume_variables>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020004040a14</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="MuteOn"> 
                <update_state_variable name="Mute_current_mute_setting_zone4" update_type="set" update_source="constant">ON</update_state_variable>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020004040d17</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="MuteOff">
                <update_state_variable name="Mute_current_mute_setting_zone4" update_type="set" update_source="constant">OFF</update_state_variable>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020004040e18</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="SetVolume">
                <action_argument name="VolumeValue" note="Value: 00~50 -> -61dB~0dB"/>
                <update_volume_variables name="Volume_current_volume_setting_zone4" update_type="set" update_source="action_argument">VolumeValue</update_volume_variables>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000415</command_string>
                        <parameter_list>
                            <volume_parameter volume_state_variable="Volume_current_volume_setting_zone4" parameter_data_type="hex" action_argument="VolumeValue" parameter_data_width="1" parameter_total_width="1"></volume_parameter>
                            <checksum_parameter parameter_data_type="hex" parameter_data_width="1" parameter_total_width="1"></checksum_parameter>
                        </parameter_list>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="DecrementBalance">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020004042b35</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="IncrementBalance">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020004042a34</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="SetBalance">
                <action_argument name="BalanceBias" note="Value: 110~146 -> 18dB Left~18dB Right"/>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000416</command_string>
                        <parameter_list>
                            <parameter parameter_data_type="hex" action_argument="BalanceBias" parameter_data_width="1" parameter_total_width="1"></parameter>
                            <checksum_parameter parameter_data_type="hex" parameter_data_width="1" parameter_total_width="1"></checksum_parameter>
                        </parameter_list>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
        </resource_component_actions>
        <resource_component_actions resource_type="AV_STEREOPROCESSOR_FUNCTION">
            <action name="IncrementBass">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020004042630</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="DecrementBass">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020004042731</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="SetBass">
                <action_argument name="BassValue" note="Value: 118~138 -> -10dB~10dB"/>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000418</command_string>
                        <parameter_list>
                            <parameter parameter_data_type="hex" action_argument="BassValue" parameter_data_width="1" parameter_total_width="1"></parameter>
                            <checksum_parameter parameter_data_type="hex" parameter_data_width="1" parameter_total_width="1"></checksum_parameter>
                        </parameter_list>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="IncrementTreble">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020004042832</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="DecrementTreble">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020004042933</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
            <action name="SetTreble">
                <action_argument name="TrebleValue" note="Value: 118~138 -> -10dB~10dB"/>
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000417</command_string>
                        <parameter_list>
                            <parameter parameter_data_type="hex" action_argument="TrebleValue" parameter_data_width="1" parameter_total_width="1"></parameter>
                            <checksum_parameter parameter_data_type="hex" parameter_data_width="1" parameter_total_width="1"></checksum_parameter>
                        </parameter_list>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>
        </resource_component_actions>
        <custom_component_actions>
            <action name="SelectSource1">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000404030d</command_string>
                        <delay ms_delay="200"/>
                    </command>                    
                </command_interface>
            </action>
            <action name="SelectSource2">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000404040e</command_string>
                        <delay ms_delay="200"/>
                    </command>                    
                </command_interface>
            </action>
            <action name="SelectSource3">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">02000404050f</command_string>
                        <delay ms_delay="200"/>
                    </command>                    
                </command_interface>
            </action>
            <action name="SelectSource4">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020004040610</command_string>
                        <delay ms_delay="200"/>
                    </command>                    
                </command_interface>
            </action>
            <action name="SelectSource5">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020004040711</command_string>
                        <delay ms_delay="200"/>
                    </command>                    
                </command_interface>
            </action>
            <action name="SelectSource6">
                <command_interface interface="rs232">
                    <command response_required="no">
                        <command_string type="hex">020004040812</command_string>
                        <delay ms_delay="200"/>
                    </command>
                </command_interface>
            </action>        
        </custom_component_actions>
    </logical_component>
    
</component>